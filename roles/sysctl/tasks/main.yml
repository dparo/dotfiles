---
- name: SysCtl
  tags:
    - sysctl
  block:
  # See https://fedoraproject.org/wiki/Changes/IncreaseVmMaxMapCount
  - name: Setup vm.max_map_count
    ansible.builtin.lineinfile:
      path: /etc/sysctl.conf
      line: vm.max_map_count = 2147483642
      regexp: ^vm.max_map_count\s*=
      create: true
    become: true
    tags:
      - gaming

  - name: Setup fs.inotify.max_user_watches
    ansible.builtin.lineinfile:
      path: /etc/sysctl.conf
      line: fs.inotify.max_user_watches=524288
      regexp: ^fs.inotify.max_user_watches\s*=
      create: true
    become: true
    tags:
      - vscode
