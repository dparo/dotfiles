#!/usr/bin/env bash

run() {
    nohup "$@" >/dev/null 2>&1 &
    disown
}

mkdir -p "/tmp/$USER/notes"

file="$(mktemp -p "/tmp/$USER/notes/" --suffix="-$(date).md")"

if builtin type marktext 1>/dev/null 2>/dev/null; then
    touch "$file"
    cd "$(dirnamee "$file")" || exit 1
    run marktext "$(dirname "$file")" "$file"
else
    run kitty -d "$(dirname "$file")" -- nvim  "$file"
fi

